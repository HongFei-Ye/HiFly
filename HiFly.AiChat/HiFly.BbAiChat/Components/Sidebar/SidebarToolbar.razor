@using Microsoft.AspNetCore.Components

<div class="@GetToolbarClass()" style="@GetDynamicSpacingStyle()">
    @if (!IsCollapsed)
    {
        <!-- 左侧区域：主要操作 -->
        <div class="toolbar-left">
            @if (NewChatButtonTemplate != null)
            {
                @NewChatButtonTemplate
            }
            else
            {
                <!-- 默认的新建对话按钮 - 支持动态文字切换 -->
                <button class="@GetButtonClass()" 
                        @onclick="HandleNewChat"
                        title="新建对话">
                    <div class="btn-new-chat-icon">
                        <i class="fas fa-plus"></i>
                    </div>
                    @if (ShouldShowButtonText())
                    {
                        <span class="btn-new-chat-text">@GetDynamicButtonText()</span>
                    }
                    <div class="btn-new-chat-shine"></div>
                </button>
            }
        </div>
        
        <!-- 右侧区域：次要控件 -->
        <div class="toolbar-right">
            <!-- 宽度调整控件插槽 -->
            <div class="width-controls-wrapper">
                @ChildContent
            </div>
            
            @if (ShowToggleButton)
            {
                <button class="panel-toggle-btn @(IsCollapsed ? "collapsed" : "")" 
                        @onclick="HandleToggleCollapse"
                        title="@(IsCollapsed ? "展开侧边栏" : "折叠侧边栏")">
                    <div class="toggle-btn-bg"></div>
                    <i class="@GetToggleIcon()"></i>
                </button>
            }
        </div>
    }
    else
    {
        <!-- 折叠状态：只显示切换按钮 -->
        @if (ShowToggleButton)
        {
            <button class="panel-toggle-btn @(IsCollapsed ? "collapsed" : "")" 
                    @onclick="HandleToggleCollapse"
                    title="@(IsCollapsed ? "展开侧边栏" : "折叠侧边栏")">
                <div class="toggle-btn-bg"></div>
                <i class="@GetToggleIcon()"></i>
            </button>
        }
    }
</div>

